<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>CAM² COVID-19</title>
        <link rel="icon" type="image/x-icon" href="favicon.ico"/>
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,600,800,800i" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;1,100;1,200;1,500;1,600&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/df6431e323547add1b4cf45992913f15286456d3/devicon.min.css">
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="{{ url_for('static', filename='css/styles.css') }}"  type="text/css" rel="stylesheet" />
        <link href="{{ url_for('static', filename='css/test.css') }}"  type="text/css" rel="stylesheet">
        <link href="{{ url_for('static', filename='css/resume.css') }}"  type="text/css"  rel="stylesheet">
        <link href="{{ url_for('static', filename='css/hamburgers.css') }}"  type="text/css"  rel="stylesheet">
        <!--css scripts for jquery slider-->
        <link rel="stylesheet" href="//apps.bdimg.com/libs/jqueryui/1.10.4/css/jquery-ui.min.css">
        <script src="//apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
    </head>
    <header id="stickyheaders">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top navbar-custom shadow-sm" style="transition: top 0.3s; padding-top: 0px !important; padding-bottom: 0px !important;" id="mainNav">
        <div class="container">
            <a href="https://covid19.purduehelps.org/" class="navbar-brand js-scroll-trigger navbar-image">
            <img style="width: 65px; height: 39px;" src="{{url_for('static', filename='img/Cam_2.png')}}">
            </a>
            <button class="hamburger hamburger--spin navbar-toggler navbar-mobile-element" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"  type="button" style="margin-top: 5px !important;">
            <span class="hamburger-box">
                <span class="hamburger-inner"></span>
            </span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ml-auto">
                    <li class="nav-item"> <a href="https://covid19.purduehelps.org/" class="nav-item nav-link" style="font-family: 'Exo 2', sans-serif; font-size: 20px; font-weight: 100; text-decoration: none !important; ">Home</a> </li>
                    <li class="nav-item"> <a href="https://covid19.purduehelps.org/timeline/" class="nav-item nav-link" style="font-family: 'Exo 2', sans-serif; font-size: 20px; font-weight: 100; text-decoration: none !important;">Timeline</a> </li>
                    <li class="nav-item"> <a href="https://covid19.purduehelps.org/research/" class="nav-item nav-link" style="font-family: 'Exo 2', sans-serif; font-size: 20px; font-weight: 100; text-decoration: none !important;">Research</a> </li>
                    <li class="nav-item active"> <a href="https://covid19.purduehelps.org/analysis/" class="nav-item nav-link active" style="font-family: 'Exo 2', sans-serif; font-size: 20px; font-weight: 100;  text-decoration: none !important;">Analysis<span class="sr-only">(current)</span></a> </li>
                    <li class="nav-item"> <a href="https://covid19.purduehelps.org/members/" class="nav-item nav-link" style="font-family: 'Exo 2', sans-serif; font-size: 20px; font-weight: 100;  text-decoration: none !important; ">Members</a> </li>
                    <li class="nav-item"> <a href="https://www.cam2project.net/" class="nav-item nav-link" style="font-family: 'Exo 2', sans-serif; font-size: 20px; font-weight: 100;  text-decoration: none !important; " target="_blank">CAM²</a> </li>
                    <!--Hwy-->
                </div>
            </div>
        </div>
        </nav>
    </header>
    
    <body id="page-top" style="margin-top:-100px;">
        <section class="projects-section bg-light" id="members">
            <div class="container">
                <h3 class="mb-0" style="font-family: 'Exo 2', sans-serif; color: #1B1B1B; font-weight: 400;">Vehicle and People Counts</h3>
                <br>
                <p class="text-black-50 mb-5" style="margin-top: -10px;">In the past summer, our research team collected and analyzed data from over 10,000 worldwide cameras. We use number of vehicles and crowd sizes as indication of whether people are following social distancing guidelines. Specifically, we focused on 9,752 cameras to analyze traffic and 3,254 cameras to count people. Below are the plots we have for people and vehicle counts. </p>
                <p class="text-black-50 mb-5" style="margin-top: -10px;"> Example plots: </p>
                <img src="{{url_for('static', filename='img/example_plot.png')}}" style="width:auto; max-width:100%; height:auto;">
                <p></p>
                <p class="text-black-50 mb-5" style="margin-top: -10px;">The scatter plots are designed to show the correlation between vehicle and people counts from select countries on a monthly basis starting from April 2020. Different colors and markers represent different date ranges indicated in the legend of each plot to reflect the different months following the outbreak of the pandemic. You are welcome to use the feature below to plot subsets of the data we collected and explore the trends shown. Next to the scatter plot, you will find a double bar histogram presenting the vehicle and people maximums. </p>
                
                <!--This p includes all the display of generating a plot-->
                <p>
                    <!--Slide bar value display-->
                    <!--Select country-->
                    <div>
                    <label for="country">Country: </label>
                    <select id="country">
                        <option value ="Australia">Australia</option>
                        <option value="Austria">Austria</option>
                        <option value="Canada">Canada</option>
                        <option value="Czech Republic">Czech Republic</option>
                        <option value="Denmark">Denmark</option>
                        <option value="France">France</option>
                        <option value="Germany">Germany</option>
                        <option value="Great Britain">Great Britain</option>
                        <option value="Hong Kong">Hong Kong</option>
                        <option value="Hungary">Hungary</option>
                        <option value="Italy">Italy</option>
                        <option value="Spain">Spain</option>
                        <option value ="United States" selected="selected">United States</option>
                    </select>
                    <script>
                        document.getElementById("country").onclick = function() { 
                            if (country.value == "United States") {
                                document.getElementById("state-selector").style.display = "block";
                            } else {
                                document.getElementById("state-selector").style.display = "none";
                            }
                        } 
                    </script>
                    <div id="state-selector">
                    <label for="state">State: </label>
                    <select id="state">
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="PR">Puerto Rico</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                    </select>
                    </div>
                    <label for="start">Start Date:</label>
                    <input type="date" id="start" name="start" value="2020-04-01" min={{ min_date }} max={{ max_date }}>
                    <label for="end">End Date:</label>
                    <input type="date" id="end" name="end" value="2020-07-31" min={{ min_date }} max={{ max_date }}>
                    </div>
                    <br>
                    <!--View plot button-->
                    <button type="button" id="query" style="background-color: #555555;
                        border: none;
                        color: white;
                        text-align: center;
                        text-decoration: none;
                        display: inline-block;
                        font-size: 16px;
                        margin: auto;
                        left: 50%;
                        cursor: pointer;">View Plot</button>
                    <!--Display when loading the plot-->
                    <div id="loading-div-background">
                        <div id="loading-div" class="ui-corner-all" >
                        <h3 style="color:gray;font-weight:normal;">Loading plot.... May take 30 seconds</h3>
                        </div>
                    </div>
                  <!--Container for the plot-->
                  
                  <div style="width:800px;">
                    <div id="container" style="width:300px; float:left;"></div>
                    <div id="container2" style="width:300px; float:right;"></div>
                </div>
                <div style="clear: both;"></div>

                </p>

                <!-- A paragraph of vehicle detection-->
                <h3 class="mb-0" style="font-family: 'Exo 2', sans-serif; color: #1B1B1B; font-weight: 400;">Violation Detection</h3>
                <br>
                    <p class="text-black-50 mb-5" style="margin-top: -10px;">The following is an example picture of our violation detection model. Red and green bounding boxes represent people violating social distancing guidelines and following them.</p>
                <div class="row">
                    <img src="{{url_for('static', filename='img/violation.png')}}" style="width:auto; max-width:100%; height:auto;">
                </div>
                <hr>
                <br>
                <!-- /.row -->
            </div>
        </section>
        <footer class="footer bg-black small text-center text-white-50"><div class="container">Copyright © CAM² 2020</div></footer>
        <!-- Javascript code -->
        <script type="text/javascript">
                
            $("#loading-div-background").css({ opacity: 0.7 });
            /* This function customize the slide bar*/
            $(function() {
            $( "#slider-range" ).slider({
              range: true,
              min: 1,
              max: 31,
              values: [ 1, 31 ],
              slide: function( event, ui ) {
                $( "#amount1" ).val(ui.values[ 0 ]);
                $( "#amount2" ).val(ui.values[ 1 ]);
              }
            });
            $( "#amount1" ).val($( "#slider-range" ).slider( "values", 0 ));
            $( "#amount2" ).val($( "#slider-range" ).slider( "values", 1 ));
            });

            
            $("#loading-div-background").css({ opacity: 0.7 });
              
            /* Customize button "View Plot" */
            $("#query").click(function() {  
                $("#loading-div-background").show();
                $("#container").hide();
                $("#container2").hide();
                /* Get value of slide bar */
                var country = document.getElementById("country").value;
                var state = document.getElementById("state").value;
                var start = document.getElementById("start").value;
                var end = document.getElementById("end").value;
                var qu = {"country":country, "state": state,"start":start, "end":end};
                /* ajax request: send range value and receive the plot*/
                $.ajax({
                type: "POST",
                async:true,
                contentType: "application/json; charset=utf-8",
                url: "/query",
                data: JSON.stringify(qu),
                dataType: "json",
                /* function if the request succeeds */
                success: function (data) {   
                $("#container").html(data.scatter);   
                $("#loading-div-background").hide(); 
                $("#container").show();

                $("#container2").html(data.hist);    
                $("#container2").show();
                },
                /* function if the request fails */
                error: function (e) {
                    console.log("error")
                }
                });
            });
      </script>

        <script type="text/javascript" src="{{ url_for('static', filename='js/scripts.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>

    </body>
</html>
<!--                navText: ["<i class='fa fa-arrow-left fa-2x' style='color: #1B1B1B !important;'></i>", "<i class='fa fa-arrow-right fa-2x' style='color: #1B1B1B !important'></i>"],
-->
